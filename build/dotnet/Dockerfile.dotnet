FROM trzeci/emscripten:sdk-tag-1.38.31-64bit

COPY src/ImageMagick ImageMagick

RUN cd /src/ImageMagick; ./checkout.sh Linux

RUN mkdir build

COPY build/dotnet/linux/build.ImageMagick.sh build

RUN cd /src/build; ./build.ImageMagick.sh

COPY build/dotnet/linux/build.Native.sh build

COPY src/Native Native

RUN cd /src/build; ./build.Native.sh

COPY build/dotnet/linux/copy.output.sh build